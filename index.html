<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ±ºæˆ°åœ‹æ³°é‡‘é ­è…¦</title>
    
    <!-- 1. æ ¸å¿ƒå¼•æ“ -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- 2. Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <!-- 3. ç‰¹æ•ˆåº« (å½©å¸¶) -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* ğŸ¨ è¦–è¦ºæ ¸å¿ƒï¼šè˜­åŸæ™¶è‹±å°ˆç”¨ (æ·±æµ·è»è— + æµé‡‘) */
        body { 
            background: radial-gradient(circle at center, #172554 0%, #020617 100%); 
            color: #ffffff; 
            font-family: "Microsoft JhengHei", "Heiti TC", sans-serif; 
            overflow-x: hidden; 
            touch-action: manipulation; /* ç¦æ­¢é›™æ“Šç¸®æ”¾ */
            -webkit-tap-highlight-color: transparent;
        }

        /* âœ¨ æ¨™é¡Œé‡‘å…‰ç‰¹æ•ˆ */
        .title-gold {
            color: #facc15;
            text-shadow: 3px 3px 0px #000, 0 0 20px rgba(250, 204, 21, 0.6);
        }
        
        /* ğŸ‘“ é«˜å°æ¯”æŠ•å½±å„ªåŒ– */
        .text-shadow-strong { text-shadow: 2px 2px 0px #000000; }

        /* ğŸ”˜ æŒ‰éˆ•ç«‹é«”æ„Ÿ */
        .btn-push { transition: all 0.1s; transform: translateY(0); box-shadow: 0 8px 0 rgba(0,0,0,0.4); } 
        .btn-push:active:not(:disabled) { transform: translateY(8px); box-shadow: 0 0 0 rgba(0,0,0,0); }
        .btn-disabled { opacity: 0.6; cursor: not-allowed; filter: grayscale(100%); transform: none !important; box-shadow: none !important; }
        
        /* ğŸ“± æ‰‹æ©Ÿç«¯ï¼šç”°å­—å‹è¶…å¤§æŒ‰éˆ• */
        .grid-btn-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 16px; /* åŠ å¤§é–“è·é˜²èª¤è§¸ */
            height: 60vh;
            width: 100%;
            padding: 10px;
        }

        /* DJ é¢æ¿éš±è—å·è»¸ */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        /* å‹•ç•« */
        .animate-pop { animation: pop 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .animate-pulse-fast { animation: pulse 0.8s infinite; }
        @keyframes pop { 0% { transform: scale(0.8); opacity: 0; } 100% { transform: scale(1); opacity: 1; } }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // ==========================================
        // 1. ç³»çµ±è¨­å®š (å·²å¯«æ­»ï¼Œå…è¼¸å…¥)
        // ==========================================
        const FIREBASE_CONFIG = {
            projectId: "cathaylife-e0714", 
            apiKey: "AIzaSyDoeEnc5-cebY6RfWAYnGM5y1BwLHFG5_g"    
        };

        // ğŸµ éŸ³æ•ˆåŒ…è¨­å®š (10å¤§é¢¨æ ¼ DJ å°)
        const SOUND_PACKS = {
            kahoot: { 
                name: "ğŸµ Kahoot", 
                lobby: "https://ia802805.us.archive.org/23/items/kahoot-lobby-music-hd/Kahoot%21%20Lobby%20Music%20%28HD%29.mp3", 
                game: "https://ia801509.us.archive.org/21/items/kahoot-music_202105/Kahoot%20Music.mp3", 
                correct: "https://www.myinstants.com/media/sounds/kahoot-correct-answer-sound-effect.mp3", 
                victory: "https://www.myinstants.com/media/sounds/kahoot-winner.mp3" 
            },
            variety: { name: "ğŸ‰ ç¶œè—", lobby: "https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3", game: "https://assets.mixkit.co/active_storage/sfx/896/896-preview.mp3", correct: "https://www.myinstants.com/media/sounds/super-mario-coin.mp3", victory: "https://www.myinstants.com/media/sounds/final-fantasy-v-music-victory-fanfare.mp3" },
            tension: { name: "âš¡ ç·Šå¼µ", lobby: "https://assets.mixkit.co/active_storage/sfx/123/123-preview.mp3", game: "https://assets.mixkit.co/active_storage/sfx/255/255-preview.mp3", correct: "https://assets.mixkit.co/active_storage/sfx/2000/2000-preview.mp3", victory: "https://assets.mixkit.co/active_storage/sfx/2019/2019-preview.mp3" },
            epic: { name: "ğŸ» å²è©©", lobby: "https://assets.mixkit.co/active_storage/sfx/888/888-preview.mp3", game: "https://assets.mixkit.co/active_storage/sfx/131/131-preview.mp3", correct: "https://assets.mixkit.co/active_storage/sfx/2003/2003-preview.mp3", victory: "https://assets.mixkit.co/active_storage/sfx/2020/2020-preview.mp3" },
            retro: { name: "ğŸ‘¾ é›»ç©", lobby: "https://assets.mixkit.co/active_storage/sfx/446/446-preview.mp3", game: "https://assets.mixkit.co/active_storage/sfx/447/447-preview.mp3", correct: "https://www.myinstants.com/media/sounds/1-up-mario.mp3", victory: "https://www.myinstants.com/media/sounds/stage-clear.mp3" },
            chill: { name: "â˜• çˆµå£«", lobby: "https://assets.mixkit.co/active_storage/sfx/147/147-preview.mp3", game: "https://assets.mixkit.co/active_storage/sfx/896/896-preview.mp3", correct: "https://www.myinstants.com/media/sounds/ding-sound-effect_2.mp3", victory: "https://www.myinstants.com/media/sounds/tada-fanfare-a.mp3" },
            horror: { name: "ğŸ‘» æ‡¸ç–‘", lobby: "https://assets.mixkit.co/active_storage/sfx/134/134-preview.mp3", game: "https://assets.mixkit.co/active_storage/sfx/307/307-preview.mp3", correct: "https://assets.mixkit.co/active_storage/sfx/2059/2059-preview.mp3", victory: "https://assets.mixkit.co/active_storage/sfx/2020/2020-preview.mp3" },
            rock: { name: "ğŸ¸ æ–æ»¾", lobby: "https://assets.mixkit.co/active_storage/sfx/116/116-preview.mp3", game: "https://assets.mixkit.co/active_storage/sfx/262/262-preview.mp3", correct: "https://assets.mixkit.co/active_storage/sfx/3004/3004-preview.mp3", victory: "https://assets.mixkit.co/active_storage/sfx/2021/2021-preview.mp3" },
            cute: { name: "ğŸ‘¶ å¯æ„›", lobby: "https://assets.mixkit.co/active_storage/sfx/97/97-preview.mp3", game: "https://assets.mixkit.co/active_storage/sfx/96/96-preview.mp3", correct: "https://assets.mixkit.co/active_storage/sfx/1110/1110-preview.mp3", victory: "https://assets.mixkit.co/active_storage/sfx/1435/1435-preview.mp3" },
            scifi: { name: "ğŸ¤– ç§‘å¹»", lobby: "https://assets.mixkit.co/active_storage/sfx/119/119-preview.mp3", game: "https://assets.mixkit.co/active_storage/sfx/366/366-preview.mp3", correct: "https://assets.mixkit.co/active_storage/sfx/2002/2002-preview.mp3", victory: "https://assets.mixkit.co/active_storage/sfx/2016/2016-preview.mp3" },
            drum: { name: "ğŸ¥ æˆ°é¼“", lobby: "https://assets.mixkit.co/active_storage/sfx/130/130-preview.mp3", game: "https://assets.mixkit.co/active_storage/sfx/131/131-preview.mp3", correct: "https://assets.mixkit.co/active_storage/sfx/2060/2060-preview.mp3", victory: "https://assets.mixkit.co/active_storage/sfx/2022/2022-preview.mp3" }
        };

        // é¡å¤–éŸ³æ•ˆï¼šæ­¡å‘¼è² (æ‰‹å‹•æ’­æ”¾ç”¨)
        const CHEER_SOUND = "https://assets.mixkit.co/active_storage/sfx/2013/2013-preview.mp3";

        // ==========================================
        // 2. å…­çµ„ç²¾é¸é¡Œåº« (å®Œå…¨æ›´æ–°)
        // ==========================================
        const QUESTION_PACKS = {
            set1: {
                name: "ğŸ† æ±ºæˆ°é‡‘é ­è…¦ (ä¸»å ´)",
                data: [
                    { q: "ç¾ä»£äººæ‰‹æ©Ÿæ»‘ä¸åœï¼Œçœ¼ç›å®¹æ˜“å£æ‰ã€‚å“ªå¼µé™„ç´„å°ˆé–€ä¿è­·ã€Œéˆé­‚ä¹‹çª—ã€ï¼Œè€Œä¸”æ­é… FitBack æœ€é«˜æŠ˜ 3%ï¼Ÿ", opts: ["(A) ç›å½©äººç”Ÿ PLUS", "(B) ç²¾å½©å¤§çµå±€", "(C) ç›®å…‰å¦‚è±†", "(D) çœä¸€éš»çœ¼é–‰ä¸€éš»çœ¼"], ans: 0, note: "ã€Œç›å½©äººç”Ÿ PLUSã€æ˜¯æ‚¨çš„è­·çœ¼é¦–é¸ï¼" },
                    { q: "è¨±å¤šäººè²·ç¾å…ƒä¿å–®æ˜¯ç‚ºäº†å‚³æ‰¿ï¼Œä½†å“ªä¸€å¼µä¿å–®å¾ˆè²¼å¿ƒï¼Œè¬ä¸€ç½¹æ‚£ã€Œé‡åº¦ç™Œç—‡ã€å¯ä»¥ã€Œå•Ÿå‹•è±å…ã€ï¼Ÿ", opts: ["(A) ç¾æ»¿äººç”Ÿ", "(B) ç¾æ„›åº·ç›ˆ", "(C) ç¾éº—å³¶", "(D) ç¾å¤¢æˆçœŸ"], ans: 1, note: "ã€Œç¾æ„›åº·ç›ˆã€æä¾›é‡åº¦ç™Œç—‡è±å…ä¿è²»æ©Ÿåˆ¶ï¼Œæ¸›è¼•è² æ“”ä¿éšœå»¶çºŒï¼" },
                    { q: "å®œè˜­å†¬å¤©æ¿•å†·ï¼Œè€äººå®¶æœ€æ€•è·Œå€’ã€‚å“ªå¼µæ„å¤–éšªæ´»åˆ° 91 æ­²é‚„æœƒåŒ…ä¸€å€‹ã€Œä¿è²» 50%ã€çš„å¤§ç´…åŒ…çµ¦ä½ ï¼Ÿ", opts: ["(A) æ¨‚äº«å¹³å®‰", "(B) è€ç•¶ç›Šå£¯", "(C) é•·å‘½ç™¾æ­²", "(D) æ¨‚ä¸æ€èœ€"], ans: 0, note: "ã€Œæ¨‚äº«å¹³å®‰ã€å®ˆè­·é«˜é½¡é•·è¼©ï¼Œæ´»å¾—ä¹…é ˜å¾—å¤šï¼" },
                    { q: "ã€è…¦ç­‹æ€¥è½‰å½ã€‘ä»€éº¼æ±è¥¿ã€Œæ—©ä¸Šå››æ¢è…¿ï¼Œä¸­åˆå…©æ¢è…¿ï¼Œæ™šä¸Šä¸‰æ¢è…¿ã€ï¼Œè€Œä¸”è¶Šæ—©è²·è¶Šä¾¿å®œï¼Ÿ", opts: ["(A) æ€ªç‰©", "(B) æ¤…å­", "(C) äºº (è²·ä¿éšª)", "(D) èœˆèš£"], ans: 2, note: "äººçš„ä¸€ç”Ÿç”Ÿè€ç—…æ­»ï¼Œä¿éšªè¶Šæ—©è²·è¶Šä¾¿å®œå–”ï¼" },
                    
                    // âœ… ä¿®æ”¹ï¼šéŒ¢éŒ¢éŒ¢
                    { q: "ã€æ¥­å‹™æ—¥å¸¸ã€‘æ¯”èµ·ã€Œæˆ‘æ„›ä½ ã€ï¼Œæ¥­å‹™å“¡æ›´å–œæ­¡è½åˆ°å“ªä¸‰å€‹å­—ï¼Ÿ", opts: ["(A) è¾›è‹¦äº†", "(B) åƒé£½æ²’", "(C) éŒ¢éŒ¢éŒ¢", "(D) ç°½å“ªè£¡"], ans: 2, note: "éŒ¢éŒ¢éŒ¢ï¼æœ‰æ¥­ç¸¾æœ€å¯¦åœ¨ï¼(ç•¶ç„¶ç°½å“ªè£¡ä¹Ÿå¾ˆæ£’)" },

                    { q: "å®œè˜­é›¨ç¥åŒè¡Œï¼Œæ©Ÿè»Šæ—æœ€æ€•æ‰“æ»‘ã€Œç¨®ç”°ã€ã€‚å¦‚æœä¸å°å¿ƒéª¨æŠ˜è„«è‡¼ï¼Œå“ªå¼µé™„ç´„æ˜¯æˆ‘å€‘çš„ã€Œéª¨ç§‘ç¥é†«ã€ï¼Ÿ", opts: ["(A) éµç‰›é‹åŠŸæ•£", "(B) æ–°é‡‘éª¨åŠ›", "(C) çœŸçš„å¥½ç—›", "(D) ç­‹é–‹è…°è»Ÿ"], ans: 1, note: "ã€Œæ–°é‡‘éª¨åŠ›ã€é‡å°éª¨æŠ˜è„«è‡¼æä¾›å®Œå–„ä¿éšœï¼" },
                    { q: "æƒ³è¦ä¿è²»æœ‰å»æœ‰å›ï¼Ÿå“ªå¼µé˜²ç™Œéšªä¸»æ‰“ã€Œç„¡ç†è³ å›é¥‹ã€ï¼Œå¥åº·ç¶­æŒå¥½ï¼Œæ»¿æœŸæŠŠéŒ¢ (1.02å€) é‚„çµ¦ä½ ï¼Ÿ", opts: ["(A) æ»¿æº¢åº·æ„›", "(B) æ»¿æ¼¢å¤§é¤", "(C) æ»¿è¼‰è€Œæ­¸", "(D) æº¢æ–¼è¨€è¡¨"], ans: 0, note: "ã€Œæ»¿æº¢åº·æ„›ã€ç„¡ç†è³ å›é¥‹æ©Ÿåˆ¶ï¼Œå¥åº·è²¡å¯Œé›™è´ï¼" },
                    
                    // âœ… ä¿®æ”¹ï¼šå‰µé€ åƒ¹å€¼
                    { q: "ã€æ¥­å‹™æ—¥å¸¸ã€‘ç•¶å®¢æˆ¶èªªã€Œä¿è²»å¤ªè²´ã€æ™‚ï¼Œé€šå¸¸ä»£è¡¨ä»€éº¼æ©Ÿæœƒä¾†äº†ï¼Ÿ", opts: ["(A) è¢«æ‹’çµ•çš„æ©Ÿæœƒ", "(B) å–å’–å•¡çš„æ©Ÿæœƒ", "(C) å‰µé€ åƒ¹å€¼èˆ‡æˆäº¤çš„æ©Ÿæœƒ", "(D) å›å®¶ç¡è¦ºçš„æ©Ÿæœƒ"], ans: 2, note: "å«Œè²¨æ‰æ˜¯è²·è²¨äººï¼é€™æ­£æ˜¯å±•ç¾å•†å“åƒ¹å€¼çš„å¥½æ™‚æ©Ÿï¼" },

                    { q: "é‡å°ã€Œç”·æ€§ã€æ”è­·è…ºç™Œèˆ‡ã€Œå¥³æ€§ã€ä¹³ç™Œï¼Œå“ªä¸€å°å•†å“åœ¨ç¬¬ 6 å¹´å¾ŒæœƒåŠ ç¢¼çµ¦ä»˜ 50%ï¼Ÿ", opts: ["(A) ç‰›éƒ èˆ‡ ç¹”å¥³", "(B) è±ªåº·æ„› èˆ‡ å¥½åº·æ„›", "(C) å¿—æ˜ èˆ‡ æ˜¥å¬Œ", "(D) ç¾…å¯†æ­ èˆ‡ èŒ±éº—è‘‰"], ans: 1, note: "ã€Œè±ªåº·æ„›ã€èˆ‡ã€Œå¥½åº·æ„›ã€çµ¦äºˆç‰¹å®šç™Œç—‡åŠ ç¢¼ä¿éšœï¼" },
                    
                    // âœ… ä¿®æ”¹ï¼š2026
                    { q: "ã€é€åˆ†é¡Œã€‘2026 å¹´åœ‹æ³°äººå£½çš„ç›®æ¨™æ˜¯ä»€éº¼ï¼Ÿ", opts: ["(A) æ¥­ç¸¾é•·ç´…", "(B) èº«é«”å¥åº·", "(C) å¤§å®¶ç™¼å¤§è²¡", "(D) ä»¥ä¸Šçš†æ˜¯"], ans: 3, note: "ç¥å¤§å®¶ 2026 æ¥­ç¸¾é•·ç´…ï¼Œèº«é«”å¥åº·ï¼Œç™¼å¤§è²¡ï¼" }
                ]
            },
            set2: {
                name: "ğŸ¦† å®œè˜­åœ¨åœ°é€š",
                data: [
                    { q: "æˆ‘å€‘ç¾åœ¨æ‰€åœ¨çš„ã€Œè˜­åŸæ™¶è‹±é…’åº—ã€ï¼Œæœ€èåå…¨å°ç£çš„é®åº—ä¹‹å¯¶ç¾é£Ÿæ˜¯ï¼Ÿ", opts: ["(A) ä¸‰æ˜Ÿè”¥æ²¹é¤…", "(B) æ«»æ¡ƒéœ¸ç‹é´¨", "(C) å“¡å±±é­šä¸¸ç±³ç²‰", "(D) ç¾…æ±è‚‰ç¾¹"], ans: 1, note: "æ²’åƒéæ«»æ¡ƒéœ¸ç‹é´¨ï¼Œåˆ¥èªªä½ ä¾†éè˜­åŸæ™¶è‹±ï¼" },
                    { q: "å®œè˜­äººè¬›è©±æœ‰ä¸€å€‹å°ˆå±¬çš„å£é ­ç¦ªï¼Œå½¢å®¹æ±è¥¿ã€Œå¾ˆå¼·ã€å¾ˆæ£’ã€æœƒèªªï¼Ÿ", opts: ["(A) æ°´å•¦ (Sui)", "(B) å‹ (Kå‹)", "(C) ç‹‚", "(D) é ‚"], ans: 1, note: "é€™æ±è¥¿ã€Œå‹ã€å¥½å‘·ï¼é€™å€‹äººã€Œå‹ã€å²å®³ï¼" },
                    { q: "å®œè˜­å†¬å¤©æœ€è‘—åçš„ç‰¹è‰²æ˜¯ä»€éº¼ï¼Ÿ(èº«ç‚ºæ¥­å‹™æœ€ç—›è‹¦çš„äº‹)", opts: ["(A) æ¯å¤©å¤§å¤ªé™½", "(B) ä¸‹é›ª", "(C) é›¨ä¸‹ä¸åœ", "(D) æ²™å¡µæš´"], ans: 2, note: "ç«¹é¢¨è˜­é›¨ï¼Œå®œè˜­çš„é›¨æ˜¯æ¥­å‹™å“¡æ„å¿—åŠ›çš„è€ƒé©—ï¼" },
                    { q: "å®œè˜­è‘—åçš„ã€Œé¾œå±±å³¶ã€ï¼Œå®ƒçš„åå­—ç”±ä¾†æ˜¯å› ç‚ºå½¢ç‹€åƒä»€éº¼ï¼Ÿ", opts: ["(A) çƒé¾œ", "(B) é¥…é ­", "(C) é¯¨é­š", "(D) æ½›æ°´è‰‡"], ans: 0, note: "å› ç‚ºå½¢ç‹€åƒä¸€éš»æµ®åœ¨æµ·é¢ä¸Šçš„çƒé¾œè€Œå¾—åã€‚" },
                    { q: "å®œè˜­åç”¢ã€Œç³•æ¸£ã€å¸¸è¢«æ‹¿ä¾†å½¢å®¹å®œè˜­äººçš„å€‹æ€§ï¼Œç‰¹è‰²æ˜¯ï¼Ÿ", opts: ["(A) å¤–å†·å…§ç†±", "(B) åˆè‡­åˆç¡¬", "(C) å…¥å£å³åŒ–", "(D) ç”œç”œèœœèœœ"], ans: 0, note: "å¤–è¡¨å†·å†·çš„ï¼Œè£¡é¢ç‡™å¾—è¦å‘½ï¼Œä»£è¡¨å®œè˜­äººæ‚¶é¨·çš„ç†±æƒ…ï¼" },
                    { q: "å®œè˜­äººåƒã€Œç±³ç²‰ç¾¹ã€çš„æ™‚å€™ï¼Œé€šå¸¸ä¸€å®šæœƒé…å“ªä¸€æ¨£å°åƒï¼Ÿ", opts: ["(A) è‡­è±†è…", "(B) å¥¶å‡æ²", "(C) ç‰›èˆŒé¤…", "(D) é›æ’"], ans: 0, note: "ç±³ç²‰ç¾¹é…è‡­è±†è…ï¼Œé€™æ˜¯å®œè˜­äººå¾å°åƒåˆ°å¤§çš„çµ•é…ï¼" },
                    { q: "è™Ÿç¨±ã€Œå®œè˜­äººçš„ç™¾è²¨å…¬å¸ã€ï¼Œåœ¨åœ°äººæœ€æ„›é€›çš„ã€Œå®œè˜­ç‰¹æœ‰ã€è¶…å¸‚æ˜¯ï¼Ÿ", opts: ["(A) å…¨è¯", "(B) å–œäº’æƒ ", "(C) å®¶æ¨‚ç¦", "(D) å¥½å¸‚å¤š"], ans: 1, note: "å–œäº’æƒ  (Surewell) æ˜¯å®œè˜­åœ¨åœ°çš„è¶…å¸‚éœ¸ä¸»ï¼" },
                    { q: "å®œè˜­çš„åç”¢ã€Œç‰›èˆŒé¤…ã€ï¼Œå®ƒå½¢ç‹€é•·å¾—åƒä»€éº¼è€Œå¾—åï¼Ÿ", opts: ["(A) ç‰›çš„èˆŒé ­", "(B) ç‰›çš„å°¾å·´", "(C) ç‰›çš„è€³æœµ", "(D) ç‰›è§’"], ans: 0, note: "é•·é•·æ‰æ‰çš„åƒç‰›èˆŒï¼Œæ‰€ä»¥å«ç‰›èˆŒé¤…ã€‚" },
                    { q: "ä¸‹åˆ—å“ªä¸€å€‹ä¸æ˜¯å®œè˜­çš„è¡Œæ”¿å€ï¼Ÿ", opts: ["(A) ç¤æºª", "(B) ç¾…æ±", "(C) ä¸‰æ˜Ÿ", "(D) æ·¡æ°´"], ans: 3, note: "æ·¡æ°´åœ¨æ–°åŒ—å¸‚å–”ï¼ä¸è¦è·‘éŒ¯åœ°æ–¹äº†ï¼" },
                    { q: "ã€é€åˆ†é¡Œã€‘å®œå† é€šè¨Šè™•çš„å¤¥ä¼´ï¼Œæœ€å¤§çš„ç‰¹è‰²æ˜¯ä»€éº¼ï¼Ÿ", opts: ["(A) é¡å€¼é«˜", "(B) å°ˆæ¥­åº¦é«˜", "(C) å‘å¿ƒåŠ›å¼·", "(D) ä»¥ä¸Šçš†æ˜¯"], ans: 3, note: "æˆ‘å€‘å°±æ˜¯ä¸€ç¾¤æœ‰é¡å€¼ã€æœ‰å°ˆæ¥­åˆåœ˜çµçš„åœ˜éšŠï¼" }
                ]
            },
            set3: {
                name: "ğŸ“± æ•´åˆè¡ŒéŠ·å¤§å¸«",
                data: [
                    { q: "åœ‹æ³°äººå£½çš„å¥åº·ä¿ƒé€²è¨ˆç•«ã€ŒFitBackã€ä¸­æ–‡åç¨±æ˜¯ä»€éº¼ï¼Ÿ", opts: ["(A) ç˜¦èº«å§", "(B) æ¸›é‡å§", "(C) å¥åº·å§", "(D) è·‘æ­¥å§"], ans: 2, note: "FitBack å¥åº·å§ï¼èµ°è·¯å°±èƒ½è³ºå›é¥‹ï¼" },
                    { q: "åƒåŠ  FitBack å¥åº·å§ï¼Œé”åˆ°æŒ‡å®šä»»å‹™å¯ä»¥ç²å¾—ä»€éº¼ï¼Ÿ", opts: ["(A) å°æ¨¹é»", "(B) è˜‹æœ", "(C) è²¼ç´™", "(D) çç‹€"], ans: 0, note: "å°æ¨¹é» (Tree Points) å¯ä»¥æŠ˜æŠµä¿è²»æˆ–å…Œæ›å¥½ç¦®å–”ï¼" },
                    { q: "Cathay Walker Plus ä¸»è¦æ˜¯é¼“å‹µå¤§å®¶åšä»€éº¼é‹å‹•ï¼Ÿ", opts: ["(A) æ¸¸æ³³", "(B) èµ°è·¯/è·‘æ­¥", "(C) èˆ‰é‡", "(D) ç¡è¦º"], ans: 1, note: "æ—¥è¡Œè¬æ­¥ï¼Œå¥åº·æœ‰ä¿å›ºï¼" },
                    { q: "åœ‹æ³°äººå£½ App è£¡é¢ï¼Œä¿æˆ¶å¯ä»¥åšä»€éº¼äº‹ï¼Ÿ", opts: ["(A) æŸ¥è©¢ä¿å–®", "(B) ç”³è«‹ç†è³ ", "(C) å€Ÿæ¬¾", "(D) ä»¥ä¸Šçš†æ˜¯"], ans: 3, note: "åœ‹æ³°äººå£½ App åŠŸèƒ½è¶…å¼·å¤§ï¼Œä¸€æŒ‡æå®šå¤§å°äº‹ï¼" },
                    { q: "FitBack å¥åº·å§åªè¦æœƒå“¡ç­‰ç´šè¶Šé«˜ï¼Œå°±èƒ½äº«æœ‰æ›´é«˜çš„ï¼Ÿ", opts: ["(A) ä¿è²»æŠ˜æ¸›", "(B) åˆ©æ¯", "(C) æ‰‹çºŒè²»", "(D) é«”é‡"], ans: 0, note: "åŠªåŠ›é‹å‹•æå‡ç­‰ç´šï¼Œæœ€é«˜äº«æœ‰ä¿è²»æŠ˜æ¸›å„ªæƒ ï¼" },
                    { q: "æƒ³è¦ç´¯ç©å°æ¨¹é»ï¼Œé™¤äº†èµ°è·¯é‚„å¯ä»¥é€éä»€éº¼æ–¹å¼ï¼Ÿ", opts: ["(A) ç¡çœ å……è¶³", "(B) æªåœ˜é‹å‹•", "(C) é–±è®€å¥åº·æ–‡ç« ", "(D) ä»¥ä¸Šçš†æ˜¯"], ans: 3, note: "å¤šç¨®å¥åº·ä»»å‹™ï¼Œè®“æ‚¨è¼•é¬†è³ºé»æ•¸ï¼" },
                    { q: "åœ‹æ³°é‡‘æ§çš„ã€Œå¤§æ¨¹ã€Logo è±¡å¾µä»€éº¼æ„ç¾©ï¼Ÿ", opts: ["(A) é®é¢¨é¿é›¨", "(B) å‘ä¸Šç”Ÿé•·", "(C) ç©©å¥è¸å¯¦", "(D) ä»¥ä¸Šçš†æ˜¯"], ans: 3, note: "å¤§æ¨¹å®ˆè­·æ‚¨èˆ‡å®¶äººçš„å¹¸ç¦æœªä¾†ã€‚" },
                    { q: "å°æ–¼ã€Œæ•´åˆè¡ŒéŠ·ã€æœ€å¥½çš„æè¿°æ˜¯ï¼Ÿ", opts: ["(A) åªè³£ä¸€ç¨®å•†å“", "(B) æ»¿è¶³å®¢æˆ¶å…¨æ–¹ä½éœ€æ±‚", "(C) å¼·è¿«æ¨éŠ·", "(D) åªåšç”¢éšª"], ans: 1, note: "å£½éšªã€ç”¢éšªã€ä¿¡ç”¨å¡ã€å¥åº·ä¿ƒé€²ï¼Œå…¨æ–¹ä½æ»¿è¶³å®¢æˆ¶ï¼" },
                    { q: "ä½¿ç”¨åœ‹æ³°ä¸–è¯ CUBE å¡ç¹³ä¿è²»ï¼Œæœ‰ä»€éº¼å¥½è™•ï¼Ÿ", opts: ["(A) 3% å›é¥‹ç„¡ä¸Šé™", "(B) ç½°æ¬¾", "(C) æ²’å¥½è™•", "(D) æœƒè¢«ç½µ"], ans: 0, note: "åˆ· CUBE å¡ç¹³ä¿è²»ï¼Œäº«æœ‰å°æ¨¹é»å›é¥‹ï¼(ä¾ç•¶æœŸæ´»å‹•ç‚ºæº–)" },
                    { q: "ã€é€åˆ†é¡Œã€‘2026å¹´ï¼Œèª°æ˜¯æ•¸ä½è½‰å‹çš„é ˜èˆªè€…ï¼Ÿ", opts: ["(A) é‹¼éµäºº", "(B) åœ‹æ³°äººå£½", "(C) è®Šå½¢é‡‘å‰›", "(D) å“†å•¦Aå¤¢"], ans: 1, note: "åœ‹æ³°äººå£½æ•¸ä½é ˜èˆªï¼Œèˆ‡æ‚¨ä¸€èµ·å‰é€²æœªä¾†ï¼" }
                ]
            },
            set4: {
                name: "ğŸ’¼ æ¥­å‹™ç‹€æ³é¡Œ (å…¨æ–°)",
                data: [
                    { q: "ã€è¿·ä¿¡é¡Œã€‘ç°½ç´„å‰ç‚ºäº†ç¥ˆæ±‚é †åˆ©ï¼Œæ¥­å‹™å“¡ã€Œçµ•å°ä¸èƒ½ã€åƒä»€éº¼æ°´æœï¼Ÿ", opts: ["(A) è˜‹æœ", "(B) èŠ­æ¨‚", "(C) é³³æ¢¨", "(D) æ©˜å­"], ans: 1, note: "åƒäº†ã€ŒèŠ­æ¨‚ã€å°±æœƒè¢«é–‹èŠ­æ¨‚ç¥¨ (ç©ºé ­æ”¯ç¥¨)ï¼Œç™½å¿™ä¸€å ´å•Šï¼" },
                    { q: "ã€å¿ƒæ…‹é¡Œã€‘è¢«å®¢æˆ¶æ‹’çµ•ç¬¬ 10 æ¬¡ï¼Œé€™æ™‚å€™æˆ‘å€‘å¿ƒè£¡æ‡‰è©²è¦é»˜å¿µï¼Ÿ", opts: ["(A) æˆ‘ä¸å¹¹äº†", "(B) ä»–æ²’çœ¼å…‰", "(C) ä¸‹ä¸€ä½æœƒæ›´å¥½", "(D) éƒ½æ˜¯å¹»è¦º"], ans: 2, note: "æ‹’çµ•æ˜¯å¸¸æ…‹ï¼Œå …æŒæ˜¯å¿ƒæ…‹ï¼Œä¸‹ä¸€ä½å®¢æˆ¶å°±åœ¨è½‰è§’ï¼" },
                    { q: "ã€ç‹€æ³é¡Œã€‘ç•¶å®¢æˆ¶èªªã€Œæˆ‘æ²’éŒ¢ã€æ™‚ï¼Œå…¶å¯¦é€šå¸¸ä»£è¡¨ä»€éº¼æ„æ€ï¼Ÿ", opts: ["(A) ä»–çœŸçš„ç ´ç”¢äº†", "(B) ä»–ä¸æƒ³ç†ä½ ", "(C) è¦ºå¾—å•†å“åƒ¹å€¼é‚„ä¸å¤  (å‰µé€ åƒ¹å€¼)", "(D) ä»–æƒ³å€ŸéŒ¢"], ans: 2, note: "æ²’éŒ¢é€šå¸¸æ˜¯è—‰å£ï¼Œä»£è¡¨æˆ‘å€‘é‚„æ²’å‰µé€ å‡ºè¶³å¤ çš„ã€Œéœ€æ±‚èˆ‡åƒ¹å€¼ã€ï¼" },
                    { q: "ã€å¢å“¡é¡Œã€‘çœ‹åˆ°æœ‹å‹å·¥ä½œä¸é †ã€æƒ³æ›è·‘é“ï¼Œæˆ‘å€‘ç¬¬ä¸€åæ‡‰æ˜¯ï¼Ÿ", opts: ["(A) å€Ÿä»–éŒ¢", "(B) è«‹ä»–åƒé£¯", "(C) èº²é ä¸€é»", "(D) é‚€è«‹ä»–ä¾†åœ‹æ³°"], ans: 3, note: "æœ€å¥½çš„å¹«åŠ©å°±æ˜¯çµ¦ä»–ä¸€ä»½æœ‰ç™¼å±•çš„äº‹æ¥­ï¼Œä¾†åœ‹æ³°å°±å°äº†ï¼" },
                    { q: "ã€å·¥å…·é¡Œã€‘iPad (Cathay Box) é™¤äº†å»ºè­°æ›¸ï¼Œæœ€å¤§çš„åŠŸèƒ½æ˜¯ï¼Ÿ", opts: ["(A) è¿½åŠ‡", "(B) è“‹æ³¡éºµ", "(C) å¢Šä¾¿ç•¶", "(D) è¡Œå‹•è¾¦å…¬/å³æ™‚æœå‹™"], ans: 3, note: "Cathay Box æ˜¯æˆ‘å€‘çš„è¡Œå‹•è¾¦å…¬å®¤ï¼Œéš¨æ™‚éš¨åœ°éƒ½èƒ½è§£æ±ºå®¢æˆ¶å•é¡Œï¼" },
                    { q: "ã€ä¿®é¤Šé¡Œã€‘é‡åˆ°ç„¡ç†å–é¬§çš„ã€Œå¥§å®¢ã€ï¼Œå°ˆæ¥­çš„æ¥­å‹™å“¡æœƒæ€éº¼åšï¼Ÿ", opts: ["(A) è·Ÿä»–åµæ¶", "(B) å¾®ç¬‘è†è½ä¸¦è§£æ±ºå•é¡Œ", "(C) æ›é›»è©±", "(D) ç¿»ç™½çœ¼"], ans: 1, note: "é«˜EQæ˜¯æ¥­å‹™çš„æ¨™é…ï¼Œå¾®ç¬‘èƒ½åŒ–è§£å°·å°¬ï¼Œå°ˆæ¥­èƒ½è´å¾—ä¿¡ä»»ã€‚" },
                    { q: "ã€æ¦®è­½é¡Œã€‘ä¿éšªæ¥­å‹™å“¡çš„æœ€é«˜æ¦®è­½æ®¿å ‚ã€ŒMDRTã€æ˜¯æŒ‡ï¼Ÿ", opts: ["(A) ç™¾è¬åœ“æ¡Œæœƒå“¡", "(B) å¿«æ¨‚åœ“æ¡Œæ­¦å£«", "(C) å¾ˆæœƒåƒé£¯", "(D) è¶…ç´šæ¥­å‹™å“¡"], ans: 0, note: "MDRT (Million Dollar Round Table) æ˜¯å…¨çƒå£½éšªæ¥­çš„æœ€é«˜æ¦®è­½ï¼" },
                    { q: "ã€çŸ¥è­˜é¡Œã€‘ã€Œé•·ç…§éšªã€è·Ÿã€Œå¤±èƒ½éšªã€æœ€å¤§çš„å·®åˆ¥åœ¨æ–¼ï¼Ÿ", opts: ["(A) æ²’å·®åˆ¥", "(B) ä¿è²»è²´", "(C) èªå®šæ¨™æº–ä¸åŒ", "(D) åå­—ä¸åŒ"], ans: 2, note: "é•·ç…§çœ‹ã€Œç‹€æ…‹ã€(é‡è¡¨)ï¼Œå¤±èƒ½çœ‹ã€Œæ®˜å»¢ç­‰ç´šã€ï¼Œç†è³ æ¨™æº–ä¸ä¸€æ¨£å–”ï¼" },
                    { q: "ã€ç¾å¯¦é¡Œã€‘æœˆåº•æœ€å¾Œä¸€å¤©æ™šä¸Š 11:59 åˆ†ï¼Œæ¥­å‹™å“¡é€šå¸¸åœ¨å¹¹å˜›ï¼Ÿ", opts: ["(A) ç¡å¤§é ­è¦º", "(B) ç›¯è‘—å ±è¡¨ç¢ºèªæ¥­ç¸¾", "(C) åƒå®µå¤œ", "(D) è¿½åŠ‡"], ans: 1, note: "ç›´åˆ°æœ€å¾Œä¸€ç§’éƒ½ä¸æ”¾æ£„ï¼Œç¢ºèªæ¥­ç¸¾å…¥å¸³æ‰èƒ½å®‰å¿ƒç¡è¦ºï¼" },
                    { q: "ã€é€åˆ†é¡Œã€‘åœ¨å®œå† é€šè¨Šè™•ï¼Œæœ€è®“äººæ„Ÿåˆ°æº«æš–çš„æ˜¯ä»€éº¼ï¼Ÿ", opts: ["(A) å†·æ°£", "(B) é£²æ°´æ©Ÿ", "(C) æ£‰è¢«", "(D) å¤¥ä¼´äº’ç›¸æ”¯æ´çš„æ„Ÿæƒ…"], ans: 3, note: "ä¸€å€‹äººèµ°å¾—å¿«ï¼Œä¸€ç¾¤äººèµ°å¾—é ï¼Œå¤¥ä¼´çš„æ„Ÿæƒ…æ˜¯ç„¡åƒ¹çš„ï¼" }
                ]
            },
            set5: {
                name: "ğŸ¥¶ å†·ç¬‘è©±å¤§å…¨",
                data: [
                    { q: "å“ªä¸€ç¨®æ°´æœè¦–åŠ›æœ€å·®ï¼Ÿ", opts: ["(A) è¥¿ç“œ", "(B) èŠ’æœ", "(C) è“®éœ§", "(D) èŠ­æ¨‚"], ans: 1, note: "å› ç‚ºã€ŒèŠ’æœã€(å¿™/ç›²)ï¼" },
                    { q: "ç‚ºä»€éº¼è›¤èœŠè¦å›å®¶ï¼Ÿ", opts: ["(A) å› ç‚ºå®ƒè¢«æ’æ“ ", "(B) å› ç‚ºå®ƒæƒ³åª½åª½", "(C) å› ç‚ºå®ƒæ„›å®¶", "(D) å› ç‚ºå®ƒè‡ªé–‰"], ans: 0, note: "å› ç‚ºå®ƒè¢«ã€Œæ®¼ã€é›¢ (éš”é›¢) äº†ï¼(æˆ–è€…ï¼šå› ç‚ºä»–è¦ºå¾—å¾ˆå†·/è¢«å‰æ®¼)" },
                    { q: "ç´…è±†ç”Ÿå—åœ‹ï¼Œé‚£ç¶ è±†ç”Ÿå“ªè£¡ï¼Ÿ", opts: ["(A) åŒ—åœ‹", "(B) ç¾åœ‹", "(C) å½°åŒ–", "(D) å˜‰ç¾©"], ans: 3, note: "å› ç‚ºç¶ è±†å˜‰ç¾©äºº (ç¶ è±†åŠ è–ä»)ï¼" },
                    { q: "å“ªä¸€å€‹è‹±æ–‡å­—æ¯å¯ä»¥å–ï¼Ÿ", opts: ["(A) A", "(B) B", "(C) T", "(D) P"], ans: 2, note: "å› ç‚º T (Tea) èŒ¶ï¼" },
                    { q: "èª°æœ€é»‘ï¼Ÿ", opts: ["(A) åŒ…é’å¤©", "(B) å“†å•¦Aå¤¢", "(C) çƒé´‰", "(D) ç…¤ç‚­"], ans: 1, note: "å› ç‚ºå“†å•¦Aå¤¢ä¼¸æ‰‹ä¸è¦‹äº”æŒ‡ï¼" },
                    { q: "å“ªä¸€ç¨®èŠ±æœ€æ²’åŠ›ï¼Ÿ", opts: ["(A) èŒ‰è‰èŠ±", "(B) ç«ç‘°èŠ±", "(C) ç‰½ç‰›èŠ±", "(D) å¤ªé™½èŠ±"], ans: 0, note: "å› ç‚ºã€Œå¥½ä¸€æœµç¾éº—çš„èŒ‰è‰èŠ±ã€(å¥½ä¸€æœµæ²’åŠ›çš„èŒ‰è‰èŠ±)ï¼" },
                    { q: "å“ªä½å¤äººæœ€æœƒè·‘ï¼Ÿ", opts: ["(A) æ›¹æ“", "(B) åŠ‰å‚™", "(C) é—œç¾½", "(D) å¼µé£›"], ans: 0, note: "å› ç‚ºã€Œèªªæ›¹æ“ï¼Œæ›¹æ“å°±åˆ°ã€ï¼" },
                    { q: "ä»€éº¼å‹•ç‰©æœ€æ„›äº‚è²·æ±è¥¿ï¼Ÿ", opts: ["(A) è±¬", "(B) æ–‘é¦¬", "(C) ç…å­", "(D) éº’éºŸ"], ans: 1, note: "å› ç‚ºæ–‘é¦¬æ˜¯ã€Œé»‘ç™½é¦¬ã€(å°èªï¼šäº‚è²·)ï¼" },
                    { q: "çš®å¡ä¸˜ç«™èµ·ä¾†è®Šä»€éº¼ï¼Ÿ", opts: ["(A) çš®å¡å…µ", "(B) çš®å¡è·‘", "(C) çš®å¡è¹²", "(D) é‚„æ˜¯çš®å¡ä¸˜"], ans: 0, note: "çš®å¡å…µ (çš®å¡ä¸˜ å…µ/ä¹’ ä¹“ è®Šè²)" },
                    { q: "ã€é€åˆ†é¡Œã€‘è½å®Œé€™äº›å†·ç¬‘è©±ï¼Œç¾åœ¨æ„Ÿè¦ºå¦‚ä½•ï¼Ÿ", opts: ["(A) é€™è£¡å¥½å†·", "(B) æƒ³ç©¿å¤–å¥—", "(C) é‚„æ˜¯åœ‹æ³°æœ€æº«æš–", "(D) ä»¥ä¸Šçš†æ˜¯"], ans: 3, note: "åœ‹æ³°äººå£½çµ¦æ‚¨æ»¿æ»¿çš„æº«æš–ï¼" }
                ]
            },
            set6: {
                name: "ğŸ‘µ é•·è¼©åŒæ¨‚æœƒ",
                data: [
                    { q: "ä¸€å¹´ä¹‹ä¸­ï¼Œå“ªä¸€å€‹æœˆä»½çš„å¤©æ•¸æœ€å°‘ï¼Ÿ", opts: ["(A) 2æœˆ", "(B) 4æœˆ", "(C) 6æœˆ", "(D) 9æœˆ"], ans: 0, note: "2æœˆé€šå¸¸åªæœ‰ 28 æˆ– 29 å¤©ã€‚" },
                    { q: "ã€Œèµ°è·¯è¦é å³é‚Šã€ï¼Œä¸‹ä¸€å¥æ¥é¾æ˜¯ä»€éº¼ï¼Ÿ", opts: ["(A) å…©éš»è€è™è·‘å¾—å¿«", "(B) é›–ç„¶æ¯”è¼ƒé ", "(C) é€™æ˜¯äº¤é€šè¦å‰‡", "(D) æ¯”è¼ƒä¸æœƒè¢«è»Šæ’"], ans: 2, note: "é€™æ˜¯ä¸€é¦–å…’æ­Œ... ä½†ç¾å¯¦ä¸­ã€Œè¡Œäººé é‚Šèµ°ã€æ‰å®‰å…¨å–”ï¼" },
                    { q: "ç«¯åˆç¯€è¦åƒç²½å­ï¼Œé‚£ä¸­ç§‹ç¯€è¦åƒä»€éº¼ï¼Ÿ", opts: ["(A) æ¹¯åœ“", "(B) æœˆé¤…/æŸšå­", "(C) æ½¤é¤…", "(D) ç«é›"], ans: 1, note: "ä¸­ç§‹æœˆåœ“äººåœ˜åœ“ï¼Œåƒæœˆé¤…å‰æŸšå­ã€‚" },
                    { q: "è«‹å•ã€Œæ¾æŸé•·é’ã€é€šå¸¸æ˜¯ç”¨ä¾†ç¥ç¦èª°ï¼Ÿ", opts: ["(A) æ–°å©šå¤«å¦»", "(B) å°å¬°å…’", "(C) ç•¢æ¥­ç”Ÿ", "(D) é•·è¼©"], ans: 3, note: "ç¥ç¦é•·è¼©èº«é«”å¥åº·ï¼Œåƒæ¾æŸä¸€æ¨£é•·å£½ã€‚" },
                    { q: "å°èªè«ºèªï¼šã€Œä¸€å…¼äºŒé¡§ã€ï¼Œä¸‹ä¸€å¥æ˜¯ä»€éº¼ï¼Ÿ", opts: ["(A) æ‘¸è›¤ä»”å…¼æ´—è¤²", "(B) ç„¡é­šè¦ä¹Ÿå¥½", "(C) åƒç¢—å…§æ´—ç¢—å¤–", "(D) æ²’ç±³å…¼ç…®è•ƒè–¯æ¹¯"], ans: 0, note: "ä¸€å…¼äºŒé¡§ï¼Œæ‘¸è›¤ä»”å…¼æ´—è¤² (ä¸€èˆ‰å…©å¾—çš„æ„æ€)ã€‚" },
                    { q: "é é˜²å¤±æ™ºç—‡ï¼Œé†«ç”Ÿå»ºè­°å¹³å¸¸å¤šåšä»€éº¼ä¼‘é–’æ´»å‹•ï¼Ÿ", opts: ["(A) ç¡è¦º", "(B) çœ‹é›»è¦–", "(C) æ‰“éº»å°‡/å‹•è…¦", "(D) ç™¼å‘†"], ans: 2, note: "å¤šå‹•è…¦ã€å¤šç¤¾äº¤ï¼Œæ‰“éº»å°‡æ˜¯ä¸éŒ¯çš„é¸æ“‡å–”ï¼" },
                    { q: "ä¸‹åˆ—å“ªä¸€ç¨®æ°´æœï¼Œåˆ‡é–‹ä¾†è£¡é¢åƒæ˜Ÿæ˜Ÿï¼Ÿ", opts: ["(A) è˜‹æœ", "(B) æ¥Šæ¡ƒ", "(C) è¥¿ç“œ", "(D) é¦™è•‰"], ans: 1, note: "æ¥Šæ¡ƒåˆ‡é¢å°±æ˜¯æ˜Ÿæ˜Ÿçš„å½¢ç‹€å–”ï¼" },
                    { q: "å°èªè«ºèªï¼šã€Œåƒæœå­ã€è¦å¹¹å˜›ï¼Ÿ", opts: ["(A) åç±½", "(B) æ‹œæ¨¹é ­", "(C) æ´—æ‰‹", "(D) å‰Šçš®"], ans: 1, note: "åƒæœå­æ‹œæ¨¹é ­ï¼Œåšäººè¦æ‡‚å¾—é£²æ°´æ€æºã€‚" },
                    { q: "ç™¼ç”Ÿè»Šç¦è¦å ±è­¦ï¼Œè¦æ‰“å¹¾è™Ÿï¼Ÿ", opts: ["(A) 110", "(B) 119", "(C) 112", "(D) 104"], ans: 0, note: "å ±è­¦è«‹æ‰“ 110ï¼Œæ•‘è­·è»Šè«‹æ‰“ 119ã€‚" },
                    { q: "ã€é€åˆ†é¡Œã€‘ç¥å¤§å®¶æ–°å¹´å¿«æ¨‚ï¼Œä¸‹ä¸€å¥æ˜¯ï¼Ÿ", opts: ["(A) ç´…åŒ…æ‹¿ä¾†", "(B) æ­å–œç™¼è²¡", "(C) è¬äº‹å¦‚æ„", "(D) ä»¥ä¸Šçš†æ˜¯"], ans: 3, note: "ç¥å¤§å®¶æ–°å¹´å¿«æ¨‚ï¼Œç´…åŒ…æ»¿æ»¿ï¼Œè¬äº‹å¦‚æ„ï¼" }
                ]
            }
        };

        function App() {
            const [view, setView] = useState('role-select'); 
            const [db, setDb] = useState(null);
            const [roomCode, setRoomCode] = useState('');
            const [gameState, setGameState] = useState({});
            const [myPlayer, setMyPlayer] = useState({ name: '', score: 0 });
            const [players, setPlayers] = useState([]);
            const [isProcessing, setIsProcessing] = useState(false);
            const [timer, setTimer] = useState(10); 
            const revealedRef = useRef(false);
            
            // ğŸ†• é¡Œåº«é¸æ“‡ç‹€æ…‹ (é è¨­éš¨æ©Ÿ)
            const [selectedSet, setSelectedSet] = useState('random');

            // éŸ³æ•ˆèˆ‡ DJ ç³»çµ±
            const [isMuted, setIsMuted] = useState(false);
            // ğŸµ é è¨­ä½¿ç”¨ Kahoot é¢¨æ ¼
            const [currentTheme, setCurrentTheme] = useState('kahoot');
            const audioRef = useRef(null);
            const cheerRef = useRef(new Audio(CHEER_SOUND));

            useEffect(() => {
                // åˆå§‹åŒ–é è¨­éŸ³æ•ˆ
                audioRef.current = {
                    lobby: new Audio(SOUND_PACKS[currentTheme].lobby),
                    game: new Audio(SOUND_PACKS[currentTheme].game),
                    correct: new Audio(SOUND_PACKS[currentTheme].correct),
                    victory: new Audio(SOUND_PACKS[currentTheme].victory)
                };
                audioRef.current.lobby.loop = true;
                audioRef.current.lobby.volume = 0.5;
                audioRef.current.game.loop = true;
                audioRef.current.game.volume = 0.4;

                if (!firebase.apps.length) {
                    try {
                        firebase.initializeApp({
                            apiKey: FIREBASE_CONFIG.apiKey,
                            authDomain: `${FIREBASE_CONFIG.projectId}.firebaseapp.com`,
                            projectId: FIREBASE_CONFIG.projectId
                        });
                        setDb(firebase.firestore());
                    } catch (error) { alert("é€£ç·šéŒ¯èª¤"); }
                } else { setDb(firebase.firestore()); }

                const savedRoom = sessionStorage.getItem('host_room_code');
                if (savedRoom) setRoomCode(savedRoom);
                
                // âœ… Magic Link é‚è¼¯ï¼šè‡ªå‹•å¸¶å…¥ç¶²å€åƒæ•¸
                const urlParams = new URLSearchParams(window.location.search);
                const codeParam = urlParams.get('code');
                if (codeParam) {
                    setRoomCode(codeParam);
                }
            }, []);

            // ğŸµ åˆ‡æ›ä¸»é¡Œé‚è¼¯
            const changeTheme = (themeKey) => {
                if (view !== 'host') return;
                audioRef.current.lobby.pause();
                audioRef.current.game.pause();

                audioRef.current.lobby.src = SOUND_PACKS[themeKey].lobby;
                audioRef.current.game.src = SOUND_PACKS[themeKey].game;
                audioRef.current.correct.src = SOUND_PACKS[themeKey].correct;
                audioRef.current.victory.src = SOUND_PACKS[themeKey].victory;

                setCurrentTheme(themeKey);

                if (!isMuted) {
                    if (gameState.step === 'lobby') audioRef.current.lobby.play().catch(()=>{});
                    else if (['question', 'reveal', 'leaderboard'].includes(gameState.step)) audioRef.current.game.play().catch(()=>{});
                }
            };

            // ğŸµ æ’­æ”¾é‚è¼¯
            useEffect(() => {
                if (isMuted || view !== 'host') {
                    if (audioRef.current) {
                        audioRef.current.lobby.pause();
                        audioRef.current.game.pause();
                    }
                    return;
                }
                
                if (audioRef.current) {
                    audioRef.current.lobby.pause();
                    audioRef.current.game.pause();

                    if (gameState.step === 'lobby') audioRef.current.lobby.play().catch(e=>{});
                    else if (['question', 'reveal', 'leaderboard'].includes(gameState.step)) audioRef.current.game.play().catch(e=>{});
                }
            }, [gameState.step, view, isMuted, currentTheme]);

            const playSound = (type) => {
                if (isMuted || view !== 'host') return;
                const sound = audioRef.current[type];
                if (sound) { sound.currentTime = 0; sound.play().catch(()=>{}); }
            };

            const playCheer = () => {
                if (isMuted || view !== 'host') return;
                cheerRef.current.currentTime = 0;
                cheerRef.current.play().catch(()=>{});
            };

            const toggleMute = () => {
                if (view !== 'host') return;
                setIsMuted(prev => !prev);
            };

            // â±ï¸ è¨ˆæ™‚å™¨é‚è¼¯
            useEffect(() => {
                if (gameState.step === 'question') {
                    setTimer(10);
                    revealedRef.current = false;
                }
            }, [gameState.qIndex, gameState.step]);

            useEffect(() => {
                let interval;
                if (view === 'host' && gameState.step === 'question' && !revealedRef.current) {
                    // 1. å€’æ•¸
                    if (timer > 0) {
                        interval = setInterval(() => setTimer(t => t - 1), 1000);
                    } 
                    // 2. æ™‚é–“åˆ° -> è‡ªå‹•å…¬ä½ˆ
                    else if (timer === 0 && !isProcessing) {
                        revealedRef.current = true;
                        hostAction('reveal');
                    }

                    // 3. å…¨å“¡ä½œç­” -> ææ—©å…¬ä½ˆ (ç·©è¡ 0.8s)
                    if (players.length > 0) {
                        const answeredCount = players.filter(p => p.lastQ === gameState.qIndex).length;
                        if (answeredCount === players.length && answeredCount > 0 && !isProcessing) {
                            revealedRef.current = true;
                            setTimeout(() => hostAction('reveal'), 800);
                        }
                    }
                }
                return () => clearInterval(interval);
            }, [view, gameState.step, timer, players, isProcessing]);

            const sortPlayers = (list) => {
                return list.sort((a, b) => {
                    if (b.score !== a.score) return b.score - a.score;
                    return a.name.localeCompare(b.name);
                });
            };

            // ğŸ‰ å½©å¸¶ç‰¹æ•ˆ
            const fireConfetti = () => {
                const duration = 5 * 1000;
                const animationEnd = Date.now() + duration;
                const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
                const randomInRange = (min, max) => Math.random() * (max - min) + min;

                const interval = setInterval(function() {
                    const timeLeft = animationEnd - Date.now();
                    if (timeLeft <= 0) { return clearInterval(interval); }
                    const particleCount = 50 * (timeLeft / duration);
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                    confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
                }, 250);
            };

            // --- Host Functions ---
            const initHost = async () => {
                if(!db) return;
                const savedRoom = sessionStorage.getItem('host_room_code');
                if (savedRoom) {
                    const doc = await db.collection('rooms').doc(savedRoom).get();
                    if (doc.exists) {
                        setRoomCode(savedRoom);
                        startHostListeners(savedRoom);
                        return;
                    }
                }
                // é€²å…¥é¸é¡Œæ¨¡å¼
            };

            const createRoom = async () => {
                const code = Math.floor(1000 + Math.random() * 9000).toString();
                setRoomCode(code);
                sessionStorage.setItem('host_room_code', code);
                
                // ğŸ² é¡Œåº«é¸æ“‡é‚è¼¯
                let chosenSetKey = selectedSet;
                if (selectedSet === 'random') {
                    const keys = Object.keys(QUESTION_PACKS);
                    chosenSetKey = keys[Math.floor(Math.random() * keys.length)];
                }

                // å–å¾—é¡Œç›®ä¸¦æ´—ç‰Œ
                const currentQuestions = QUESTION_PACKS[chosenSetKey].data;
                const shuffledOrder = [...Array(currentQuestions.length).keys()];
                for (let i = shuffledOrder.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffledOrder[i], shuffledOrder[j]] = [shuffledOrder[j], shuffledOrder[i]];
                }

                await db.collection('rooms').doc(code).set({
                    step: 'lobby', qIndex: 0, showAnswer: false, startTime: 0, 
                    updatedAt: firebase.firestore.FieldValue.serverTimestamp(),
                    themeSet: chosenSetKey, // ğŸŒŸ å„²å­˜é¸æ“‡çš„é¡Œåº«ä»£è™Ÿ
                    order: shuffledOrder // å„²å­˜éš¨æ©Ÿé †åº
                });
                startHostListeners(code);
            };

            const startHostListeners = (code) => {
                db.collection('rooms').doc(code).onSnapshot(doc => setGameState(doc.data()));
                db.collection('rooms').doc(code).collection('players').onSnapshot(snap => {
                    const list = []; snap.forEach(d => list.push({id: d.id, ...d.data()}));
                    setPlayers(sortPlayers(list));
                });
                setView('host');
            };

            const hostAction = async (action) => {
                if(!db || isProcessing) return;
                if (action === 'reveal' && gameState.step === 'reveal') return;
                if (action === 'start' && gameState.step === 'question') return;

                setIsProcessing(true);
                try {
                    const ref = db.collection('rooms').doc(roomCode);
                    
                    // å–å¾—ç•¶å‰é¡Œåº«é•·åº¦
                    const currentSet = QUESTION_PACKS[gameState.themeSet || 'set1'].data;

                    if (action === 'reveal') { playSound('correct'); await ref.update({ showAnswer: true, step: 'reveal' }); }
                    else if (action === 'end') { playSound('victory'); fireConfetti(); }
                    else if (action === 'start' || action === 'nextQ') {
                        const nextIdx = action === 'start' ? 0 : gameState.qIndex + 1;
                        if (action === 'nextQ' && nextIdx >= currentSet.length) { playSound('victory'); fireConfetti(); await ref.update({ step: 'end' }); }
                        else { await ref.update({ step: 'question', qIndex: nextIdx, showAnswer: false, startTime: Date.now() }); }
                    } else if (action === 'leaderboard') { await ref.update({ step: 'leaderboard' }); }
                } catch (e) { console.error(e); } 
                finally { setTimeout(() => setIsProcessing(false), 1000); }
            };

            // --- Player Functions ---
            const joinRoom = async () => {
                if(!db) return alert("é€£ç·šä¸­...");
                // å¼·åˆ¶æª¢æŸ¥æš±ç¨±
                if(!roomCode || !myPlayer.name.trim()) return alert("è«‹è¼¸å…¥æˆ¿é–“è™Ÿç¢¼å’Œæ‚¨çš„æš±ç¨±ï¼");
                
                const roomRef = db.collection('rooms').doc(roomCode);
                try {
                    const doc = await roomRef.get();
                    if(!doc.exists) return alert("æˆ¿é–“ä¸å­˜åœ¨");
                    const uid = Math.random().toString(36).substr(2, 9);
                    await roomRef.collection('players').doc(uid).set({ name: myPlayer.name, score: 0, lastQ: -1 });
                    setMyPlayer({...myPlayer, uid});
                    roomRef.onSnapshot(doc => setGameState(doc.data()));
                    roomRef.collection('players').doc(uid).onSnapshot(doc => { if(doc.exists) setMyPlayer(p => ({...p, ...doc.data()})); });
                    roomRef.collection('players').onSnapshot(snap => {
                        const list = []; snap.forEach(d => list.push({id: d.id, ...d.data()}));
                        setPlayers(sortPlayers(list));
                    });
                    setView('player');
                } catch (e) { alert("é€£ç·šå¤±æ•—"); }
            };

            const playerAnswer = async (optIndex) => {
                if (gameState.step !== 'question' || gameState.qIndex === myPlayer.lastQ) return;
                
                // ğŸŒŸ å¾ gameState.themeSet å–å¾—æ­£ç¢ºçš„é¡Œç›®
                const currentSet = QUESTION_PACKS[gameState.themeSet || 'set1'].data;
                const realQIndex = gameState.order ? gameState.order[gameState.qIndex] : gameState.qIndex;
                const currentQ = currentSet[realQIndex];

                const isCorrect = optIndex === currentQ.ans;
                let points = 0;
                if (isCorrect) {
                    const now = Date.now();
                    const start = gameState.startTime || now;
                    const elapsedSec = (now - start) / 1000;
                    points = Math.max(200, Math.round(1000 - (elapsedSec * 60))); // æ¥µé€Ÿè¨ˆåˆ†
                }
                const roomRef = db.collection('rooms').doc(roomCode);
                setMyPlayer(p => ({...p, lastQ: gameState.qIndex}));
                try {
                    await roomRef.collection('players').doc(myPlayer.uid).update({
                        score: firebase.firestore.FieldValue.increment(points), lastQ: gameState.qIndex
                    });
                } catch(e) { console.error("Answer failed"); }
            };

            // DJ é¢æ¿ (åƒ… Host)
            const DjPanel = () => {
                if (view !== 'host') return null;
                return (
                    <div className="fixed top-4 right-4 z-50 flex gap-2 flex-wrap justify-end">
                        <div className="bg-black/80 backdrop-blur-md p-2 rounded-xl flex gap-1 border border-gray-600 max-w-[400px] flex-wrap justify-center shadow-xl overflow-x-auto no-scrollbar">
                            {Object.keys(SOUND_PACKS).map(key => (
                                <button 
                                    key={key}
                                    onClick={() => changeTheme(key)}
                                    className={`px-3 py-2 rounded-lg text-sm font-bold whitespace-nowrap transition ${currentTheme === key ? 'bg-yellow-400 text-black' : 'text-gray-300 hover:text-white bg-gray-700/50'}`}
                                >
                                    {SOUND_PACKS[key].name}
                                </button>
                            ))}
                            <button onClick={playCheer} className="px-3 py-2 rounded-lg text-sm font-bold text-white bg-pink-600 hover:bg-pink-500 shadow-md ml-1 whitespace-nowrap">ğŸ‘ æ­¡å‘¼</button>
                        </div>
                        <button onClick={toggleMute} className="bg-white text-black p-3 rounded-full shadow-lg border-2 border-gray-300 hover:bg-gray-100 transition w-14 h-14 flex items-center justify-center shrink-0">
                            {isMuted ? "ğŸ”‡" : "ğŸ”Š"}
                        </button>
                    </div>
                );
            };

            // 1. Role Select
            if (view === 'role-select') return (
                <div className="min-h-screen flex flex-col items-center justify-center p-6 space-y-12">
                    <DjPanel />
                    <div className="text-center">
                        <h1 className="text-6xl md:text-8xl font-black mb-4 title-gold">æ±ºæˆ°<br/>åœ‹æ³°é‡‘é ­è…¦</h1>
                        <h2 className="text-3xl md:text-5xl font-bold text-white text-shadow-strong">ğŸ’° åŠ ç¢¼å¹´çµ‚é€å¤ å¤  ğŸ’°</h2>
                    </div>
                    <div className="flex flex-col gap-8 w-full max-w-xl justify-center">
                        {/* ğŸŒŸ é¸é¡Œé¢æ¿ */}
                        <div className="bg-blue-900/50 p-6 rounded-3xl border-4 border-blue-500 flex flex-col gap-4">
                            <label className="text-xl font-bold text-blue-200">é¸æ“‡æœ¬æ¬¡é¡Œåº«ï¼š</label>
                            <select className="w-full p-4 rounded-xl bg-black text-white text-2xl font-bold border-2 border-blue-400 outline-none" value={selectedSet} onChange={(e) => setSelectedSet(e.target.value)}>
                                <option value="set1">ğŸ† æ±ºæˆ°é‡‘é ­è…¦ (ä¸»å ´)</option>
                                <option value="set2">ğŸ¦† å®œè˜­åœ¨åœ°é€š</option>
                                <option value="set3">ğŸ“± æ•´åˆè¡ŒéŠ·å¤§å¸«</option>
                                <option value="set4">ğŸ’¼ æ¥­å‹™ç‹€æ³é¡Œ</option>
                                <option value="set5">ğŸ¥¶ å†·ç¬‘è©±å¤§å…¨</option>
                                <option value="set6">ğŸ‘µ é•·è¼©åŒæ¨‚æœƒ</option>
                                <option value="random">ğŸ² éš¨æ©ŸæŒ‘é¸é¡Œåº« (é©šå–œåŒ…)</option>
                            </select>
                            <button onClick={createRoom} className="bg-blue-600 hover:bg-blue-500 w-full py-6 rounded-2xl text-3xl font-bold btn-push shadow-2xl text-white flex justify-center items-center gap-4">
                                <span>ğŸ“º</span> å»ºç«‹æˆ¿é–“ (æˆ‘æ˜¯ä¸»æŒäºº)
                            </button>
                        </div>

                        <div className="bg-black/40 backdrop-blur-md w-full p-8 rounded-3xl flex flex-col justify-center space-y-6 shadow-2xl border-2 border-yellow-400/50">
                            <div className="text-center font-bold text-4xl mb-2 text-yellow-300 text-shadow-strong">ğŸ“± æˆ‘æ˜¯åƒè³½è€…</div>
                            <input placeholder="è¼¸å…¥æˆ¿é–“è™Ÿ" className="w-full p-6 bg-white/95 rounded-2xl text-center text-4xl font-bold outline-none text-black border-4 border-blue-500 focus:border-yellow-400 placeholder-gray-500" value={roomCode} onChange={e=>setRoomCode(e.target.value)} type="tel"/>
                            <input placeholder="è¼¸å…¥æš±ç¨± (ä¸ä¸€å®šè¦å…¨å)" className="w-full p-6 bg-white/95 rounded-2xl text-center text-4xl font-bold outline-none text-black border-4 border-blue-500 focus:border-yellow-400 placeholder-gray-500" value={myPlayer.name} onChange={e=>setMyPlayer({...myPlayer, name: e.target.value})} />
                            <button onClick={joinRoom} className="bg-green-600 hover:bg-green-500 w-full py-8 rounded-2xl font-black text-5xl text-white shadow-lg btn-push mt-4 border-b-8 border-green-800">åŠ å…¥æˆ°å±€</button>
                        </div>
                    </div>
                </div>
            );

            // 2. Host
            if (view === 'host') {
                const totalPlayers = players.length;
                const answeredCount = players.filter(p => p.lastQ === gameState.qIndex).length;
                
                // ğŸŒŸ å–å¾—ç•¶å‰ä½¿ç”¨çš„é¡Œåº«èˆ‡é¡Œç›®
                const currentSet = QUESTION_PACKS[gameState.themeSet || 'set1'].data;
                const realQIndex = gameState.order ? gameState.order[gameState.qIndex] : gameState.qIndex;
                const currentQ = currentSet[realQIndex];

                // ğŸ“Š è¨ˆç®—æ¯å€‹é¸é …çš„ç¥¨æ•¸ (ç”¨æ–¼é•·æ¢åœ–)
                const answerStats = [0, 0, 0, 0];
                if (gameState.showAnswer) {
                    players.forEach(p => {
                        if (p.lastQ === gameState.qIndex && p.lastSelection >= 0 && p.lastSelection < 4) {
                            answerStats[p.lastSelection]++;
                        }
                    });
                }

                return (
                <div className="min-h-screen flex flex-col">
                    <DjPanel />
                    <div className="p-6 bg-blue-900/80 flex justify-between items-center shadow-lg z-10 border-b-4 border-yellow-400 backdrop-blur-sm">
                        <div className="bg-yellow-400 text-black px-8 py-3 rounded-2xl font-black text-4xl shadow-md border-2 border-white">æˆ¿é–“ï¼š{roomCode}</div>
                        <div className="text-4xl font-bold text-white">ä¸»é¡Œï¼š<span className="text-yellow-300">{QUESTION_PACKS[gameState.themeSet || 'set1'].name}</span></div>
                        <div className="text-5xl font-black text-white text-shadow-strong">ç·šä¸Šï¼š<span className="text-yellow-400">{totalPlayers}</span> äºº</div>
                    </div>

                    <div className="flex-1 flex flex-col items-center justify-center p-4 text-center overflow-y-auto">
                        {gameState.step === 'lobby' && (
                            <div className="animate-pop w-full max-w-5xl flex flex-col items-center">
                                <h2 className="text-7xl font-black mb-8 text-white text-shadow-strong">è«‹è¼¸å…¥æˆ¿é–“è™Ÿ</h2>
                                <div className="text-[14rem] font-mono font-black text-yellow-400 leading-none mb-12 text-shadow-strong">{roomCode}</div>

                                {/* âœ… é»åç‰† */}
                                <div className="w-full max-h-[300px] overflow-y-auto bg-black/40 p-4 rounded-xl border border-blue-500/30 mb-8 shadow-inner no-scrollbar">
                                    <div className="flex flex-wrap gap-4 justify-center">
                                        {players.length === 0 ? (
                                            <span className="text-2xl text-gray-400 animate-pulse">ç­‰å¾…æˆ°å£«åŠ å…¥ä¸­...</span>
                                        ) : (
                                            players.map(p => (
                                                <div key={p.id} className="bg-blue-600/90 text-white px-6 py-2 rounded-full text-2xl font-bold shadow-lg animate-pop border border-blue-300">
                                                    {p.name}
                                                </div>
                                            ))
                                        )}
                                    </div>
                                </div>

                                <button onClick={() => hostAction('start')} disabled={isProcessing} className={`bg-green-600 hover:bg-green-500 px-24 py-10 rounded-full text-7xl font-black shadow-2xl btn-push text-white border-8 border-white ${isProcessing ? 'btn-disabled' : ''}`}>é–‹å§‹éŠæˆ² ğŸš€</button>
                            </div>
                        )}

                        {(gameState.step === 'question' || gameState.step === 'reveal') && (
                            <div className="w-full max-w-7xl animate-pop relative">
                                {gameState.step === 'question' && (
                                    <div className={`absolute -top-20 right-0 bg-black border-8 ${timer <= 3 ? 'border-red-500 text-red-500 animate-pulse-fast' : 'border-yellow-400 text-yellow-400'} rounded-full w-48 h-48 flex items-center justify-center text-9xl font-black shadow-2xl z-20`}>
                                        {timer}
                                    </div>
                                )}
                                <div className="flex justify-between items-end mb-8">
                                    <div className="text-4xl text-blue-200 font-bold tracking-widest uppercase">QUESTION {gameState.qIndex + 1}</div>
                                    <div className="text-5xl font-bold bg-blue-900 px-8 py-3 rounded-full border-4 border-yellow-400 text-white shadow-lg">
                                        å·²ç­”ï¼š<span className={answeredCount===totalPlayers ? "text-green-400" : "text-yellow-400"}>{answeredCount}</span> / {totalPlayers}
                                    </div>
                                </div>
                                <h2 className="text-6xl md:text-7xl font-black mb-12 leading-tight text-white text-shadow-strong bg-black/40 p-8 rounded-3xl backdrop-blur-sm border-2 border-white/30">
                                    {currentQ.q}
                                </h2>
                                <div className="grid grid-cols-2 gap-8">
                                    {currentQ.opts.map((opt, idx) => (
                                        <div key={idx} className={`relative p-10 text-5xl font-bold rounded-3xl text-left border-4 transition-all duration-300 shadow-lg overflow-hidden ${
                                            gameState.showAnswer 
                                                ? (idx === currentQ.ans 
                                                    ? 'bg-green-600 border-white text-white scale-105 shadow-2xl z-10' 
                                                    : 'bg-gray-800 border-gray-600 text-gray-500 opacity-50')
                                                : 'bg-white text-blue-900 border-blue-300'
                                        }`}>
                                            {/* ğŸ“Š é•·æ¢åœ–æ¢ (Bar) */}
                                            {gameState.showAnswer && (
                                                <div 
                                                    className="absolute bottom-0 left-0 h-2 bg-yellow-400/50 bar-grow" 
                                                    style={{ width: `${(answerStats[idx] / Math.max(1, answeredCount)) * 100}%`, height: '100%' }}
                                                ></div>
                                            )}
                                            <div className="relative z-10 flex justify-between">
                                                <span>{opt}</span>
                                                {gameState.showAnswer && <span className="text-yellow-300 font-mono ml-4">{answerStats[idx]}äºº</span>}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                {gameState.showAnswer && <div className="mt-12 animate-pop"><div className="inline-block bg-yellow-400 border-8 border-white text-black text-5xl font-bold px-16 py-8 rounded-full shadow-2xl transform -rotate-1">ğŸ’¡ è§£æï¼š{currentQ.note}</div></div>}
                            </div>
                        )}

                        {gameState.step === 'leaderboard' && (
                            <div className="w-full max-w-5xl animate-pop">
                                <h2 className="text-7xl font-black mb-12 title-gold">ğŸ† æˆ°æ³æ’è¡Œæ¦œ (Top 6) ğŸ†</h2>
                                <div className="space-y-6">
                                    {players.slice(0, 6).map((p, idx) => (
                                        <div key={p.id} className={`flex justify-between items-center p-8 rounded-3xl text-5xl font-bold border-4 shadow-xl ${idx === 0 ? 'bg-gradient-to-r from-yellow-400 to-orange-500 text-black border-white scale-110 z-10' : 'bg-white/90 text-blue-900 border-blue-300'}`}>
                                            <div className="flex gap-8 items-center"><span className={`w-20 h-20 flex items-center justify-center rounded-full text-4xl border-2 ${idx===0 ? 'bg-white text-yellow-600 border-yellow-600' : 'bg-blue-100 text-blue-600 border-blue-600'}`}>{idx+1}</span><span>{p.name}</span></div><div className="font-mono text-6xl">{p.score}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}

                        {gameState.step === 'end' && (
                            <div className="animate-pop w-full max-w-6xl flex flex-col items-center">
                                <h1 className="text-8xl font-black title-gold mb-8">ğŸ† æœ€çµ‚æ¦®è­½æ¦œ ğŸ†</h1>
                                
                                {/* å† è» */}
                                <div className="flex justify-center mb-8 w-full">
                                    <div className="bg-gradient-to-b from-yellow-300 to-yellow-600 p-2 rounded-[3rem] shadow-2xl transform scale-110 z-20">
                                        <div className="bg-red-700 rounded-[2.5rem] p-10 text-center border-4 border-yellow-200 min-w-[500px]">
                                            <div className="text-[7rem] mb-4 drop-shadow-lg">ğŸ‘‘</div>
                                            <div className="text-7xl font-black text-white mb-4 text-shadow-strong">{players[0]?.name}</div>
                                            <div className="text-6xl font-mono text-yellow-200 font-bold">{players[0]?.score}</div>
                                        </div>
                                    </div>
                                </div>

                                {/* äºè»å­£è» */}
                                <div className="flex justify-center gap-12 mb-10 w-full px-8">
                                    {players.slice(1, 3).map((p, idx) => (
                                        <div key={p.id} className={`flex-1 p-8 rounded-3xl text-center border-4 shadow-xl relative top-0 ${idx===0 ? 'bg-gray-200 border-gray-400' : 'bg-orange-200 border-orange-400'}`}>
                                            <div className="text-6xl mb-4">{idx===0 ? 'ğŸ¥ˆ' : 'ğŸ¥‰'}</div>
                                            <div className="text-5xl font-bold text-slate-800 mb-2">{p.name}</div>
                                            <div className="text-5xl font-mono font-bold text-slate-900">{p.score}</div>
                                        </div>
                                    ))}
                                </div>

                                {/* ç¬¬ 4, 5, 6 å */}
                                <div className="grid grid-cols-3 gap-6 w-full px-4">
                                    {players.slice(3, 6).map((p, idx) => (
                                        <div key={p.id} className="bg-white/95 p-6 rounded-2xl flex flex-col items-center justify-center border-4 border-blue-400 shadow-md">
                                            <div className="text-4xl font-bold text-slate-400 mb-2">#{idx+4}</div>
                                            <div className="text-4xl font-bold text-blue-900 truncate w-full text-center">{p.name}</div>
                                            <div className="text-3xl font-mono text-blue-600 mt-2">{p.score}</div>
                                        </div>
                                    ))}
                                </div>
                            </div>
                        )}
                    </div>

                    {/* Host æ§åˆ¶åˆ— */}
                    {gameState.step !== 'lobby' && gameState.step !== 'end' && (
                        <div className="p-8 bg-blue-900/90 flex justify-center gap-8 border-t-4 border-yellow-400 shadow-2xl">
                            {gameState.step === 'question' && <button onClick={() => hostAction('reveal')} disabled={isProcessing} className={`bg-yellow-500 hover:bg-yellow-400 text-black px-16 py-6 rounded-2xl font-bold text-4xl shadow-lg btn-push border-4 border-white ${isProcessing ? 'btn-disabled' : ''}`}>å¼·åˆ¶å…¬ä½ˆ</button>}
                            {gameState.step === 'reveal' && <button onClick={() => hostAction('leaderboard')} disabled={isProcessing} className={`bg-blue-500 hover:bg-blue-400 text-white px-16 py-6 rounded-2xl font-bold text-4xl shadow-lg btn-push border-4 border-blue-200 ${isProcessing ? 'btn-disabled' : ''}`}>çœ‹æ’è¡Œ</button>}
                            {gameState.step === 'leaderboard' && <button onClick={() => hostAction('nextQ')} disabled={isProcessing} className={`bg-green-600 hover:bg-green-500 text-white px-16 py-6 rounded-2xl font-bold text-4xl shadow-lg btn-push border-4 border-green-200 ${isProcessing ? 'btn-disabled' : ''}`}>ä¸‹ä¸€é¡Œ âœ</button>}
                        </div>
                    )}
                </div>
                );
            }

            // 3. Player
            if (view === 'player') {
                const myRank = players.findIndex(p => p.id === myPlayer.uid) + 1;
                return (
                <div className="min-h-screen flex flex-col p-4 bg-slate-900">
                    <div className="flex justify-between items-center mb-4 bg-white p-4 rounded-2xl shadow-lg border-4 border-blue-500">
                        <div className="font-black text-4xl truncate max-w-[160px] text-blue-900">{myPlayer.name}</div> 
                        <div className="flex gap-2">
                            {myRank > 0 && <div className="bg-red-600 text-white px-3 py-2 rounded-xl font-mono font-bold text-2xl border-2 border-red-800">#{myRank}</div>}
                            <div className="bg-yellow-400 px-3 py-2 rounded-xl font-mono font-bold text-black text-2xl border-2 border-yellow-600">{myPlayer.score}</div>
                        </div>
                    </div>

                    <div className="flex-1 flex flex-col justify-center text-center">
                        {gameState.step === 'lobby' && (
                            <div className="animate-pulse flex flex-col items-center">
                                <div className="text-9xl mb-8">â³</div>
                                <h2 className="text-6xl font-black mb-4 text-white">é€£ç·šæˆåŠŸï¼</h2>
                                <p className="text-blue-200 text-3xl">è«‹çœ‹å¤§è¢å¹•ï¼Œç­‰å¾…é–‹å§‹...</p>
                            </div>
                        )}
                        
                        {gameState.step === 'question' && gameState.qIndex !== myPlayer.lastQ && (
                            <div className="grid-btn-container">
                                {['A', 'B', 'C', 'D'].map((label, idx) => (
                                    <button key={idx} onClick={() => playerAnswer(idx)} className={`rounded-3xl text-9xl font-black text-white shadow-xl btn-push flex items-center justify-center border-b-[16px] active:border-b-0 active:translate-y-4 transition-all ${['bg-red-600 border-red-900', 'bg-blue-600 border-blue-900', 'bg-yellow-500 border-yellow-800', 'bg-green-600 border-green-900'][idx]}`}>
                                        {label}
                                    </button>
                                ))}
                            </div>
                        )}

                        {gameState.step === 'question' && gameState.qIndex === myPlayer.lastQ && (
                            <div className="animate-pop">
                                <div className="text-9xl mb-8 animate-bounce">ğŸš€</div>
                                <h2 className="text-6xl font-black text-green-400 mb-4">ç­”æ¡ˆå·²é€å‡º</h2>
                                <p className="text-white text-4xl">è«‹çœ‹å¤§è¢å¹•çµæœ</p>
                            </div>
                        )}

                        {(gameState.step === 'reveal' || gameState.step === 'leaderboard') && (
                            <div className="bg-white p-10 rounded-3xl shadow-2xl border-8 border-blue-500">
                                <h2 className="text-6xl font-black mb-6 text-blue-900">æœ¬é¡ŒçµæŸ</h2>
                                <p className="text-gray-600 text-4xl font-bold">æ­£ç¢ºç­”æ¡ˆè«‹çœ‹å¤§è¢å¹•</p>
                            </div>
                        )}

                        {gameState.step === 'end' && (
                            <div className="animate-pop">
                                <h2 className="text-6xl font-black mb-8 text-white">æœ€çµ‚å¾—åˆ†</h2>
                                <div className="text-[7rem] font-mono font-black text-yellow-400 mb-8">{myPlayer.score}</div>
                                <div className="text-blue-200 text-4xl">æ„Ÿè¬åƒèˆ‡ï¼</div>
                            </div>
                        )}
                    </div>
                </div>
                );
            }
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
